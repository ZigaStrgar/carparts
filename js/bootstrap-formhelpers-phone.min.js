+function(d){var f=function(h,g){this.options=d.extend({},d.fn.bfhphone.defaults,g);this.$element=d(h);if(this.$element.is('input[type="text"]')||this.$element.is('input[type="tel"]')){this.addFormatter()}if(this.$element.is("span")){this.displayFormatter()}};f.prototype={constructor:f,addFormatter:function(){var g;if(this.options.country!==""){g=d(document).find("#"+this.options.country);if(g.length!==0){this.options.format=BFHPhoneFormatList[g.val()];g.on("change",{phone:this},this.changeCountry)}else{this.options.format=BFHPhoneFormatList[this.options.country]}}this.$element.on("keyup.bfhphone.data-api",f.prototype.change);this.loadFormatter()},loadFormatter:function(){var g;g=b(this.options.format,this.$element.val());this.$element.val(g)},displayFormatter:function(){var g;if(this.options.country!==""){this.options.format=BFHPhoneFormatList[this.options.country]}g=b(this.options.format,this.options.number);this.$element.html(g)},changeCountry:function(h){var g,i;g=d(this);i=h.data.phone;i.$element.val(String(i.$element.val()).replace(/\+\d*/g,""));i.options.format=BFHPhoneFormatList[g.val()];i.loadFormatter()},change:function(j){var i,g,h,k;i=d(this).data("bfhphone");if(i.$element.is(".disabled")||i.$element.attr("disabled")!==undefined){return true}g=c(i.$element[0]);h=false;if(g===i.$element.val().length){h=true}if(j.which===8&&i.options.format.charAt(i.$element.val().length)!=="d"){i.$element.val(String(i.$element.val()).substring(0,i.$element.val().length-1))}k=b(i.options.format,i.$element.val());if(k===i.$element.val()){return true}i.$element.val(k);if(h){g=i.$element.val().length}e(i.$element[0],g);return true}};function b(k,i){var l,j,h,g;l="";i=String(i).replace(/\D/g,"");for(j=0,h=0;j<k.length;j=j+1){if(/\d/g.test(k.charAt(j))){if(k.charAt(j)===i.charAt(h)){l+=i.charAt(h);h=h+1}else{l+=k.charAt(j)}}else{if(k.charAt(j)!=="d"){if(i.charAt(h)!==""||k.charAt(j)==="+"){l+=k.charAt(j)}}else{if(i.charAt(h)===""){l+=""}else{l+=i.charAt(h);h=h+1}}}}g=k.charAt(l.length);if(g!=="d"){l+=g}return l}function c(h){var g=0,i;if(document.selection){h.focus();i=document.selection.createRange();i.moveStart("character",-h.value.length);g=i.text.length}else{if(h.selectionStart||h.selectionStart===0){g=h.selectionStart}}return g}function e(h,g){var i;if(document.selection){h.focus();i=document.selection.createRange();i.moveStart("character",-h.value.length);i.moveStart("character",g);i.moveEnd("character",0);i.select()}else{if(h.selectionStart||h.selectionStart===0){h.selectionStart=g;h.selectionEnd=g;h.focus()}}}var a=d.fn.bfhphone;d.fn.bfhphone=function(g){return this.each(function(){var j,i,h;j=d(this);i=j.data("bfhphone");h=typeof g==="object"&&g;if(!i){j.data("bfhphone",(i=new f(this,h)))}if(typeof g==="string"){i[g].call(j)}})};d.fn.bfhphone.Constructor=f;d.fn.bfhphone.defaults={format:"",number:"",country:""};d.fn.bfhphone.noConflict=function(){d.fn.bfhphone=a;return this};d(document).ready(function(){d('form input[type="text"].bfh-phone, form input[type="tel"].bfh-phone, span.bfh-phone').each(function(){var g;g=d(this);g.bfhphone(g.data())})})}(window.jQuery);